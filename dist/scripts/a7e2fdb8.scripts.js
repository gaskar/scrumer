var cardServices=angular.module("cardServices",["ngResource"]);cardServices.factory("Card",["$resource",function(a){return a("cards/getCards",{},{query:{method:"GET",isArray:!0}})}]);var socket=io.connect("http://scrumertest.herokuapp.com/"),app=angular.module("scrumerApp",["ngCookies","ngResource","ngSanitize","ngRoute","cardServices"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/cards/:created?",{templateUrl:"views/cards.html",controller:"CardsCtrl"}).when("/card/addCard",{templateUrl:"views/add-card.html",controller:"CardsCtrl"}).otherwise({redirectTo:"/"})}]);app.directive("cardDetails",["$compile",function(){}]),app.directive("card",function(){return{restrict:"E",require:"^ngModel",scope:{ngModel:"="},templateUrl:"views/card-template.html"}}),angular.module("scrumerApp").controller("LoginCtrl",["$scope","$cookies","$location",function(a,b,c){a.username="";var d=function(){return b.username},e=function(){c.path("/cards")};d()&&e(),a.login=function(){b.username=a.username,e()}}]).controller("CardsCtrl",["$scope","$routeParams","$cookies","Card",function(a,b,c,d){/^\d{2}[./-]\d{2}[./-]\d{4}$/.test(b.created)&&alert(b.created),socket.on("newCard",function(){alert("new card")}),a.cards=d.query();var e=function(a){return{creator:a,created:new Date,toDo:[],done:[],toBeCompleted:[],description:""}};a.newCard=e(c.username),a.addTodo=function(b){a.newCard.toDo.push(b),a.todoItem=""},a.addDone=function(b){a.newCard.done.push(b),a.doneItem=""},a.addToBeCompleted=function(b){a.newCard.toBeCompleted.push(b),a.toBeCompletedItem=""},a.addCard=function(){socket.emit("create",a.newCard)}}]);